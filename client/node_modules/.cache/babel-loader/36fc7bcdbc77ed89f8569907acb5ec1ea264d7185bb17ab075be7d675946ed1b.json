{"ast":null,"code":"import _objectSpread from\"/workspace/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{Settings as SettingsIcon,Server,Shield,Save,AlertCircle,CheckCircle}from'lucide-react';import{toast}from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Settings=()=>{const[settings,setSettings]=useState({maxBots:10,maxLogsPerBot:1000,maxErrorsPerBot:100,autoRestartOnError:true,logRetentionDays:30,enableNotifications:true});const[isSaving,setIsSaving]=useState(false);const[hasChanges,setHasChanges]=useState(false);// Load settings from localStorage on component mount\nuseEffect(()=>{const savedSettings=localStorage.getItem('platformSettings');if(savedSettings){try{const parsed=JSON.parse(savedSettings);setSettings(prev=>_objectSpread(_objectSpread({},prev),parsed));}catch(error){console.error('Failed to load settings:',error);}}},[]);// Track changes\nuseEffect(()=>{const savedSettings=localStorage.getItem('platformSettings');if(savedSettings){const parsed=JSON.parse(savedSettings);setHasChanges(JSON.stringify(settings)!==JSON.stringify(parsed));}else{setHasChanges(true);}},[settings]);const handleSave=async()=>{setIsSaving(true);try{// Save to localStorage\nlocalStorage.setItem('platformSettings',JSON.stringify(settings));// Simulate API call\nawait new Promise(resolve=>setTimeout(resolve,1000));setHasChanges(false);toast.success('Settings saved successfully!');}catch(error){toast.error('Failed to save settings');console.error('Save error:',error);}finally{setIsSaving(false);}};const handleReset=()=>{const defaultSettings={maxBots:10,maxLogsPerBot:1000,maxErrorsPerBot:100,autoRestartOnError:true,logRetentionDays:30,enableNotifications:true};setSettings(defaultSettings);toast.success('Settings reset to defaults');};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"Settings\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Configure your bot hosting platform\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-4\",children:[/*#__PURE__*/_jsx(Server,{size:20,className:\"text-primary-600 mr-2\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:\"Platform Settings\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Maximum Bots per User\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:settings.maxBots,onChange:e=>setSettings(_objectSpread(_objectSpread({},settings),{},{maxBots:parseInt(e.target.value)||1})),className:\"input mt-1\",min:\"1\",max:\"20\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"Recommended: 5-10 for free plan\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Maximum Logs per Bot\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:settings.maxLogsPerBot,onChange:e=>setSettings(_objectSpread(_objectSpread({},settings),{},{maxLogsPerBot:parseInt(e.target.value)||100})),className:\"input mt-1\",min:\"100\",max:\"5000\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"Older logs are automatically purged\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Maximum Errors per Bot\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:settings.maxErrorsPerBot,onChange:e=>setSettings(_objectSpread(_objectSpread({},settings),{},{maxErrorsPerBot:parseInt(e.target.value)||50})),className:\"input mt-1\",min:\"50\",max:\"500\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"Error history is limited to save memory\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-4\",children:[/*#__PURE__*/_jsx(Shield,{size:20,className:\"text-primary-600 mr-2\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:\"Security & Performance\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"autoRestartOnError\",checked:settings.autoRestartOnError,onChange:e=>setSettings(_objectSpread(_objectSpread({},settings),{},{autoRestartOnError:e.target.checked})),className:\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"autoRestartOnError\",className:\"ml-2 block text-sm text-gray-900\",children:\"Auto-restart bots on error\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 ml-6\",children:\"Automatically restart crashed bots\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"enableNotifications\",checked:settings.enableNotifications,onChange:e=>setSettings(_objectSpread(_objectSpread({},settings),{},{enableNotifications:e.target.checked})),className:\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"enableNotifications\",className:\"ml-2 block text-sm text-gray-900\",children:\"Enable browser notifications\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 ml-6\",children:\"Get notified when bots start/stop\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Log Retention (days)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:settings.logRetentionDays,onChange:e=>setSettings(_objectSpread(_objectSpread({},settings),{},{logRetentionDays:parseInt(e.target.value)||1})),className:\"input mt-1\",min:\"1\",max:\"90\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"Logs older than this are deleted\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleReset,className:\"btn-secondary\",children:\"Reset to Defaults\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[hasChanges&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-amber-600 text-sm\",children:[/*#__PURE__*/_jsx(AlertCircle,{size:16,className:\"mr-1\"}),\"Unsaved changes\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSave,disabled:isSaving||!hasChanges,className:\"btn-primary \".concat(!hasChanges||isSaving?'opacity-50 cursor-not-allowed':''),children:isSaving?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"}),\"Saving...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Save,{size:16}),\"Save Settings\"]})})]})]})]});};export default Settings;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}