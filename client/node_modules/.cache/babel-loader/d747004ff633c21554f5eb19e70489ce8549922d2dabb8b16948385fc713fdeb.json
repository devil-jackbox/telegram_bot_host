{"ast":null,"code":"import React,{useState}from'react';import{Link}from'react-router-dom';import CreateBotModal from'../components/CreateBotModal';import{Bot,Play,Square,Edit,Trash2,Activity,AlertTriangle,Clock,Code,Plus,BarChart3,Users,MessageSquare}from'lucide-react';import{useBots}from'../contexts/BotContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=()=>{const{bots,loading,startBot,stopBot,deleteBot}=useBots();const[deletingBot,setDeletingBot]=useState(null);const runningBots=bots.filter(bot=>bot.status==='running');const stoppedBots=bots.filter(bot=>bot.status==='stopped'||!bot.status);const errorBots=bots.filter(bot=>bot.status==='error');const handleStartBot=async botId=>{try{await startBot(botId);}catch(error){console.error('Failed to start bot:',error);}};const handleStopBot=async botId=>{try{await stopBot(botId);}catch(error){console.error('Failed to stop bot:',error);}};const handleDeleteBot=async botId=>{if(!window.confirm('Are you sure you want to delete this bot? This action cannot be undone.')){return;}setDeletingBot(botId);try{await deleteBot(botId);}catch(error){console.error('Failed to delete bot:',error);}finally{setDeletingBot(null);}};const getLanguageIcon=language=>{switch(language){case'javascript':case'typescript':return/*#__PURE__*/_jsx(Code,{size:16,className:\"text-yellow-500\"});case'python':return/*#__PURE__*/_jsx(Bot,{size:16,className:\"text-blue-500\"});default:return/*#__PURE__*/_jsx(Code,{size:16,className:\"text-gray-500\"});}};const getStatusBadge=bot=>{if(bot.status==='running'){return/*#__PURE__*/_jsx(\"span\",{className:\"badge-success\",children:\"Running\"});}if(bot.status==='error'){return/*#__PURE__*/_jsx(\"span\",{className:\"badge-error\",children:\"Error\"});}return/*#__PURE__*/_jsx(\"span\",{className:\"badge-warning\",children:\"Stopped\"});};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600\"})});}const[showCreateModal,setShowCreateModal]=useState(false);return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"Dashboard\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Manage your Telegram bots\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowCreateModal(true),className:\"btn-primary\",children:[/*#__PURE__*/_jsx(Plus,{size:16}),\"Create Bot\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 bg-primary-100 rounded-lg\",children:/*#__PURE__*/_jsx(Bot,{size:20,className:\"text-primary-600\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600\",children:\"Total Bots\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:bots.length})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 bg-green-100 rounded-lg\",children:/*#__PURE__*/_jsx(Activity,{size:20,className:\"text-green-600\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600\",children:\"Running\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:runningBots.length})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 bg-yellow-100 rounded-lg\",children:/*#__PURE__*/_jsx(Clock,{size:20,className:\"text-yellow-600\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600\",children:\"Stopped\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:stoppedBots.length})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 bg-red-100 rounded-lg\",children:/*#__PURE__*/_jsx(AlertTriangle,{size:20,className:\"text-red-600\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600\",children:\"Errors\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:errorBots.length})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-medium text-gray-900\",children:\"Your Bots\"})}),bots.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"p-12 text-center\",children:[/*#__PURE__*/_jsx(Bot,{size:48,className:\"mx-auto text-gray-400 mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"No bots yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:\"Create your first Telegram bot to get started\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowCreateModal(true),className:\"btn-primary\",children:[/*#__PURE__*/_jsx(Plus,{size:16}),\"Create Your First Bot\"]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"divide-y divide-gray-200\",children:bots.map(bot=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 hover:bg-gray-50 transition-colors\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[getLanguageIcon(bot.language),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:bot.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 capitalize\",children:bot.language})]})]}),getStatusBadge(bot)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[bot.status==='running'?/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleStopBot(bot.id),className:\"btn-secondary\",title:\"Stop Bot\",children:/*#__PURE__*/_jsx(Square,{size:16})}):/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleStartBot(bot.id),className:\"btn-success\",title:\"Start Bot\",children:/*#__PURE__*/_jsx(Play,{size:16})}),/*#__PURE__*/_jsx(Link,{to:\"/bot/\".concat(bot.id),className:\"btn-secondary\",title:\"Edit Bot\",children:/*#__PURE__*/_jsx(Edit,{size:16})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteBot(bot.id),disabled:deletingBot===bot.id,className:\"btn-danger\",title:\"Delete Bot\",children:deletingBot===bot.id?/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"}):/*#__PURE__*/_jsx(Trash2,{size:16})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex items-center space-x-6 text-sm text-gray-500\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(Clock,{size:14}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Created \",new Date(bot.createdAt).toLocaleDateString()]})]}),bot.updatedAt&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(Edit,{size:14}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Updated \",new Date(bot.updatedAt).toLocaleDateString()]})]})]})]},bot.id))})]}),/*#__PURE__*/_jsx(CreateBotModal,{isOpen:showCreateModal,onClose:()=>setShowCreateModal(false)})]});};export default Dashboard;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}